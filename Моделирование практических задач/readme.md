# Моделирование практических задач

## Задача про перекладывание шариков (файл [shariki.py][file1]) 
Это решение задачи на вычисление вероятности составного события, которое происходит в два этапа. Решение реализовано как аналитически (по формуле полной вероятности), так и эмпирически (симуляция миллиона экспериментов).

### Постановка задачи

Имеется две коробки с шарами белого и черного цвета, их количество известно.
1. **Первый шаг:** Из первой коробки случайным образом перекладывают `m` шаров во вторую коробку.
2. **Второй шаг:** Из второй коробки (уже после перекладывания) извлекают `k` шаров.

**Вопрос:** Какова вероятность того, что все `k` извлеченных на втором шаге шаров будут белыми?

### Математическая модель (Аналитическое решение)

Вероятность рассчитывается по формуле полной вероятности, где гипотезами является количество белых шаров `x`, переложенных из первой коробки во вторую.

`P(все k белые) = Σ [ P(переложили x белых) * P(извлекли k белых | стало white2 + x белых) ]`, где сумма берется по всем возможным `x` (от максимально возможного числа переложенных черных шаров до минимального числа белых).

- `P(переложили x белых) = C(white1, x) * C(black1, m-x) / C(white1+black1, m)`
- `P(извлекли k белых | <условие с предыдущего этапа>) = C(white2 + x, k) / C(white2+black2 + m, k)`

Реализация этого расчета находится в функции `calculate_probability`.

### Численная проверка (Симуляция экспериментов)

Для проверки аналитического результата проводится численный эксперимент:
1. Проводится большое количество `experiments` (например, 1 000 000) испытаний.
2. В каждом испытании:
   - Создаются две коробки с заданным начальным составом.
   - Из первой коробки случайно извлекается и перекладывается во вторую `m` шаров.
   - Из второй коробки извлекается `k` шаров.
   - Фиксируется успех, если все извлеченные шары оказались белыми.
3. Оценка вероятности вычисляется как отношение числа успехов к общему числу испытаний.

### Результат

Программа выводит два результата:
- **Вероятность (по формуле):** Результат аналитического расчета.
- **Вероятность (полная симуляция):** Результат численного моделирования.

При большом числе экспериментов эти два значения должны быть очень близки, что является подтверждением правильности аналитической модели.

[file1]: ./shariki.py
